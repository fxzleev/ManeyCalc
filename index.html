<!DOCTYPE html>
<html lang="ru">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Денежный калькулятор</title>
        <link rel="manifest" href="./manifest.json">
        <style>
                :root {
                        --primary: #2c3e50;
                        --accent: #27ae60;
                        --bg: #f4f7f6;
                        --card: #ffffff;
                }

                body {
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                        background-color: var(--bg);
                        margin: 0;
                        padding: 20px;
                        display: flex;
                        justify-content: center;
                }

                .container {
                        width: 100%;
                        max-width: 500px;
                        background: var(--card);
                        padding: 20px;
                        border-radius: 15px;
                        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
                }

                h2 {
                        text-align: center;
                        color: var(--primary);
                        margin-bottom: 20px;
                }

                .total-banner {
                        background: var(--primary);
                        color: white;
                        padding: 20px;
                        border-radius: 10px;
                        text-align: center;
                        margin-bottom: 25px;
                        position: sticky;
                        top: 0;
                        z-index: 10;
                }

                .total-amount {
                        font-size: 2rem;
                        font-weight: bold;
                }

                .row {
                        display: flex;
                        align-items: center;
                        margin-bottom: 12px;
                        padding-bottom: 8px;
                        border-bottom: 1px solid #eee;
                }

                .label {
                        flex: 1;
                        font-weight: 600;
                        color: #555;
                }

                .inputs {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                }

                input {
                        width: 80px;
                        padding: 10px;
                        border: 2px solid #ddd;
                        border-radius: 8px;
                        font-size: 1rem;
                        text-align: center;
                        outline: none;
                        transition: border-color 0.3s;
                }

                input:focus {
                        border-color: var(--accent);
                }

                .subtotal {
                        width: 100px;
                        text-align: right;
                        font-family: monospace;
                        color: #888;
                }

                .btn-reset {
                        display: block;
                        width: 100%;
                        padding: 15px;
                        background: #e74c3c;
                        color: white;
                        border: none;
                        border-radius: 8px;
                        font-size: 1rem;
                        cursor: pointer;
                        margin-top: 20px;
                }

                .section-title {
                        font-size: 0.8rem;
                        color: #aaa;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        margin: 20px 0 10px;
                }
        </style>
</head>

<body>

        <div class="container">
                <div class="total-banner">
                        <div>ОБЩАЯ СУММА</div>
                        <div class="total-amount" id="grandTotal">0,00 ₽</div>
                </div>

                <div id="cash-list">
                        <div class="section-title">Купюры</div>
                </div>

                <button class="btn-reset" onclick="resetAll()">Сбросить всё</button>
        </div>

        <script>
                const denominations = [
                        { val: 5000, type: 'note' },
                        { val: 2000, type: 'note' },
                        { val: 1000, type: 'note' },
                        { val: 500, type: 'note' },
                        { val: 200, type: 'note' },
                        { val: 100, type: 'note' },
                        { val: 50, type: 'note' },
                        { val: 10, type: 'note' },
                        { val: 5, type: 'note' },
                        { val: 10, type: 'coin', label: '10 ₽ (монета)' },
                        { val: 5, type: 'coin', label: '5 ₽ (монета)' },
                        { val: 2, type: 'coin', label: '2 ₽ (монета)' },
                        { val: 1, type: 'coin', label: '1 ₽ (монета)' },
                        { val: 0.5, type: 'coin', label: '50 коп.' },
                        { val: 0.1, type: 'coin', label: '10 коп.' }
                ];

                const container = document.getElementById('cash-list');
                let hasCoinTitle = false;

                // Отрисовка полей
                denominations.forEach((item, index) => {
                        if (item.type === 'coin' && !hasCoinTitle) {
                                const title = document.createElement('div');
                                title.className = 'section-title';
                                title.innerText = 'Монеты';
                                container.appendChild(title);
                                hasCoinTitle = true;
                        }

                        const row = document.createElement('div');
                        row.className = 'row';
                        row.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div class="label">${item.label || item.val + ' ₽'}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div class="inputs">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <input type="number" min="0" step="1" 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    id="input-${index}" 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        oninput="calculate()" 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            placeholder="0"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                inputmode="numeric">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div class="subtotal" id="sub-${index}">0 ₽</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    `;
                        container.appendChild(row);
                });

                function calculate() {
                        let total = 0;
                        denominations.forEach((item, index) => {
                                const qty = parseFloat(document.getElementById(`input-${index}`).value) || 0;
                                const sub = qty * item.val;
                                total += sub;
                                document.getElementById(`sub-${index}`).innerText = sub.toLocaleString('ru-RU') + ' ₽';
                        });
                        document.getElementById('grandTotal').innerText = total.toLocaleString('ru-RU', { minimumFractionDigits: 2 }) + ' ₽';
                }

                function resetAll() {
                        if (confirm('Очистить все данные?')) {
                                document.querySelectorAll('input').forEach(input => input.value = '');
                                calculate();
                        }
                }

                // Регистрация Service Worker для офлайн работы (упрощенная)
                if ('serviceWorker' in navigator) {
                        navigator.serviceWorker.register('sw.js');
                }
        </script>

</body>

</html>